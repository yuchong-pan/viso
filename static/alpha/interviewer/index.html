<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Viso - Code Interview Evolved</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://leancloud.github.io/docs/styles/font.css" rel="stylesheet">
    <link rel="stylesheet" href="/s/css/styles.css"/>
    <link rel="stylesheet" href="/s/lib/alertify/css/alertify.css">
    <link rel="stylesheet" href="/s/css/chat-style.css">
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 0;
            right: 270px;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body id="app" v-cloak>
    <form onsubmit="return false;">
        <p id="logo" v-if="!client || state === 'ready' || state === 'calling'">
            <span class="title">é¢è¯•å®˜æ§åˆ¶å°</span><br/>
        </p>
        <template v-if="supported">
            <div id="login" v-if="!client">
                <p v-if="autoCall">
                    ä»…å†éœ€ä¸€æ­¥å³å¯ä¸ {{ autoCall }} è¿çº¿
                </p>
                <p>
                    <input type="text" v-model="id" placeholder="è¾“å…¥ç¡¬ä»¶åºåˆ—å·" autofocus/>
                    <button type="submit" v-on:click="login" v-show="state !== 'loggingin'">ç™»å½•</button>
                    <button disabled v-show="state === 'loggingin'">æ­£åœ¨ç™»å½•...</button>
                </p>
            </div>
            <template v-else>
                <div id="client" title="{{ client.id }}">{{ client.id }} <a id="logout" href="javascript:;" v-on:click="logout">é€€å‡º</a></div>
                <div id="call" v-if="state === 'ready' || state === 'calling'">
                    <p>
                        <input type="text" v-model="targetId" placeholder="Target ID" required autofocus/>
                        <button type="submit" v-show="state !== 'calling'" v-on:click="call">è¿çº¿</button>
                        <button disabled v-show="state === 'calling'">æ­£åœ¨å»ºç«‹è¿æ¥</button>
                    </p>
            <!--        <p class="hint">
                        ç­‰å¾…è¿çº¿è¯·æ±‚ä¸­
                    </p>
                    <p class="hint">
                        å…¶ä»–äººå¯ä»¥é€šè¿‡è®¿é—®<br/><a href="{{ callLink }}" target="_blank">{{ callLink }}</a> ä¸ä½ è¿çº¿
                    </p>

                -->
                </div>
                <template v-if="state === 'connected' || state === 'waiting'">
                    <div id="controller">
                        <div id="calling-hint" v-show="state === 'waiting'">æ­£åœ¨ç­‰å¾…{{ targetId }}</div>
                        {{ targetId }}
                        <button v-on:click="hangup" class="button-error"><i class="material-icons">call_end</i></button>
                        <!--
                        <button v-on:click="compile" style="margin-left: 30px;"><i class="material-icons">build</i></button>
                        -->
                        <div v-if="state === 'connected'">
                            <button v-on:click="toggleCamera" :class="{ 'button-active': !localVideoEnabled }"><i class="material-icons">videocam_off</i></button>
                            <button v-on:click="toggleMic" :class="{ 'button-active': !localAudioEnabled }"><i class="material-icons">mic_off</i></button>
                            <button v-on:click="toggleMuted" :class="{ 'button-active': !remoteAudioEnabled }"><i class="material-icons">volume_off</i></button>
                        </div>
                    </div>
                </template>
            </template>
        </template>
        <div v-else id="unsupported">
            <p>å¾ˆæŠ±æ­‰ï¼Œä½ çš„æµè§ˆå™¨æš‚æ—¶ä¸æ”¯æŒæœ¬æœåŠ¡ </p>
            <p class="hint">ç›®å‰ï¼ŒViso æœåŠ¡æ”¯æŒ Chrome, Firefox, Edge, Opera ä¸ Chrome å®‰å“ç‰ˆ</p>
        </div>
    </form>
    <div id="incoming-call" v-if="incomingCall">
        <div id="caller-id">{{ incomingCall.from }}</div>
        <div>
            <button v-on:click="accept" class="button-success"><i class="material-icons">call</i></button>
            <button v-on:click="decline" class="button-error"><i class="material-icons">call_end</i></button>
        </div>
    </div>
    <div id="camera-box" v-show="state === 'connected' || state === 'waiting'">
        <div id="editor">function foo(items) {
    var x = "All this is syntax highlighted";
    return x;
}</div>
        <video id="remote_video" autoplay></video>
        <video style="display: none;" id="local_video" autoplay muted></video>
        <div id="chat">
            <div class="item">
                <input autofocus id="input-name" type="text">
                <div id="open-btn" class="btn">ğŸ”—</div>
            </div>
            <div class="item">
                <div id="print-wall" class="print-wall"></div>
            </div>
            <div class="item">
                <input id="input-send" class="input-send" type="text">
                <div id="send-btn" class="btn">å‘é€</div>
            </div>
        </div>
    </div>
    <script src="/s/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/javascript");
    </script>
    <script src="https://cdn.jsdelivr.net/vue/1.0.24/vue.min.js"></script>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script src="https://cdn1.lncld.net/static/js/av-min-1.0.0.js"></script>
    <script src="/s/lib/realtime.browser.min.js"></script>
    <script src="/s/lib/webrtc.min.js"></script>
    <script src="/s/lib/alertify/js/alertify.js"></script>
    <script src="/s/lib/vue/vue-resource.min.js"></script>
    <script src="/s/lib/typed-messages.min.js"></script>
    <script src="/s/js/interviewer-controller.js"></script>
</body>
</html>
